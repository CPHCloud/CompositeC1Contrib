<?xml version="1.0" standalone="yes"?>
<mi:PackageInstaller xmlns:mi="http://www.composite.net/ns/management/packageinstaller/1.0">
  <mi:PackageRequirements minimumCompositeVersion="2.0.3947.24461"
                          maximumCompositeVersion="9.9999.9999.9999" />

  <mi:PackageInformation name="Contribution.CompositeC1Contrib.RazorFunctions"
                         groupName="Contribution"
                         version="1.3" author="@burningice" website="http://compositec1contrib.codeplex.com"
                         readMoreUrl="http://docs.composite.net/Contribution.CompositeC1Contrib.RazorFunctions"
                         id="fe766396-6349-4219-a21f-5cc302630d1f"
                         canBeUninstalled="true"
                         systemLocking="hard"
                         flushOnCompletion="false">
    <Description>Execute cshtml files as normal C1 functions</Description>
		<TechicalDetails>Execute cshtml files as normal C1 functions</TechicalDetails>
  </mi:PackageInformation>

  <mi:PackageFragmentInstallerBinaries>
    <mi:Add path="~/Bin/CompositeC1Contrib.Core.dll" />
  </mi:PackageFragmentInstallerBinaries>

  <mi:PackageFragmentInstallers>
    <mi:Add 
      installerType="Composite.Core.PackageSystem.PackageFragmentInstallers.FilePackageFragmentInstaller, Composite" 
      uninstallerType="Composite.Core.PackageSystem.PackageFragmentInstallers.FilePackageFragmentUninstaller, Composite">
      <Files>
        <File sourceFilename="~\Bin\CompositeC1Contrib.Core.dll" targetFilename="~\Bin\CompositeC1Contrib.Core.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\CompositeC1Contrib.RazorFunctions.dll" targetFilename="~\Bin\CompositeC1Contrib.RazorFunctions.dll" allowOverwrite="true" />

        <File sourceFilename="~\Bin\Microsoft.Web.Helpers.dll" targetFilename="~\Bin\Microsoft.Web.Helpers.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\Microsoft.Web.Infrastructure.dll" targetFilename="~\Bin\Microsoft.Web.Infrastructure.dll" allowOverwrite="true" />
        
        <File sourceFilename="~\Bin\System.Web.Helpers.dll" targetFilename="~\Bin\System.Web.Helpers.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\System.Web.Razor.dll" targetFilename="~\Bin\System.Web.Razor.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\System.Web.WebPages.dll" targetFilename="~\Bin\System.Web.WebPages.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\System.Web.WebPages.Deployment.dll" targetFilename="~\Bin\System.Web.WebPages.Deployment.dll" allowOverwrite="true" />
        <File sourceFilename="~\Bin\System.Web.WebPages.Razor.dll" targetFilename="~\Bin\System.Web.WebPages.Razor.dll" allowOverwrite="true" />       
      </Files>

      <Directories>
        <Directory sourceDirectory="~\content\App_Data\Razor\" targetDirectory="~\App_Data\Razor" allowOverwrite="true" deleteTargetDirectory="false" />
      </Directories>
    </mi:Add>

    <mi:Add 
      installerType="CompositeC1Contrib.PackageFragmentInstallers.TransformXmlPackageFragmentInstaller, CompositeC1Contrib.Core" 
      uninstallerType="CompositeC1Contrib.PackageFragmentInstallers.TransformXmlPackageFragmentUninstaller, CompositeC1Contrib.Core">
      <XmlFiles>
        <XmlFile source="~\config\web.config" target="~\web.config" />
        <XmlFile source="~\config\App_Data\Composite\composite.config" target="~\App_Data\Composite\composite.config" />
      </XmlFiles>
    </mi:Add>
  </mi:PackageFragmentInstallers>
</mi:PackageInstaller>